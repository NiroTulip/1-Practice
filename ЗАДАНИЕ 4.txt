
&НаКлиенте
Процедура ПолучитьДанные(Команда)
	ПолучитьДанныеНаСервере();
КонецПроцедуры

&НаСервере
Процедура ПолучитьДанныеНаСервере()
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	Поступление.Ссылка КАК Документ,
		|	Поступление.Валюта,
		|	Поступление.Дата,
		|	КурсыВалют.Курс
		|ИЗ
		|	Документ.Поступление КАК Поступление
		|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют КАК КурсыВалют
		|		ПО КурсыВалют.Период = НАЧАЛОПЕРИОДА(Поступление.Дата, ДЕНЬ)
		|       И КурсыВалют.Валюта = Поступление.Валюта
		|ГДЕ
		|	Поступление.Дата МЕЖДУ &ДатаНачала И &ДатаКонца";
	  
		
	ДатаНачала = Дата("20210812");
	ДатаКонца = Дата("20210814235959");
	Запрос.УстановитьПараметр("ДатаКонца", ДатаКонца);
	Запрос.УстановитьПараметр("ДатаНачала", ДатаНачала);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	Выборка = РезультатЗапроса.Выбрать();
	
	Пока Выборка.Следующий() Цикл
		Сообщить("" + Выборка.Документ + " " + Выборка.Валюта + " " + Формат(Выборка.Дата,"ДФ=dd.MM.yyyy") + " " + Выборка.Курс);
	КонецЦикла;
	
КонецПроцедуры
